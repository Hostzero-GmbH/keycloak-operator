1. Get the operator status by running:
   kubectl get pods -n {{ .Release.Namespace }} -l "app.kubernetes.io/name={{ include "keycloak-operator.name" . }}"

2. Create a Keycloak instance connection:

   First, create a secret with Keycloak admin credentials:
   
   kubectl create secret generic keycloak-credentials \
     --from-literal=username=admin \
     --from-literal=password=admin

   Then create a KeycloakInstance resource:
   
   cat <<EOF | kubectl apply -f -
   apiVersion: keycloak.hostzero.com/v1beta1
   kind: KeycloakInstance
   metadata:
     name: my-keycloak
   spec:
     baseUrl: https://keycloak.example.com
     credentials:
       secretRef:
         name: keycloak-credentials
   EOF

3. Create a realm:
   
   cat <<EOF | kubectl apply -f -
   apiVersion: keycloak.hostzero.com/v1beta1
   kind: KeycloakRealm
   metadata:
     name: my-realm
   spec:
     instanceRef:
       name: my-keycloak
     definition:
       realm: my-realm
       enabled: true
       displayName: My Realm
   EOF

4. Create a client:

   cat <<EOF | kubectl apply -f -
   apiVersion: keycloak.hostzero.com/v1beta1
   kind: KeycloakClient
   metadata:
     name: my-app
   spec:
     realmRef:
       name: my-realm
     definition:
       clientId: my-app
       enabled: true
       protocol: openid-connect
       publicClient: false
       standardFlowEnabled: true
     clientSecret:
       secretName: my-app-credentials
       key: clientSecret
   EOF

5. Check the status of your resources:
   kubectl get keycloakinstances,keycloakrealms,keycloakclients

{{- if .Values.metrics.enabled }}

6. Metrics are available at:
   http://{{ include "keycloak-operator.fullname" . }}-metrics.{{ .Release.Namespace }}.svc:{{ .Values.metrics.port }}/metrics

{{- end }}

For more information, visit: https://github.com/Hostzero-GmbH/keycloak-operator
